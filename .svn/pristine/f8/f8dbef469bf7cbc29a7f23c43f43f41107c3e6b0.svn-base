<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.ylife.order.mapper.OrderMapper">

    <resultMap id="BaseResultMap" type="com.ylife.order.model.Order">
        <id column="order_id" property="orderId" jdbcType="BIGINT"/>
        <result column="order_code" property="orderCode" jdbcType="BIGINT"/>
        <result column="order_price" property="orderPrice" jdbcType="DECIMAL"/>
        <result column="order_pre_price" property="orderPrePrice" jdbcType="DECIMAL"/>
        <result column="order_old_price" property="orderOldPrice" jdbcType="DECIMAL"/>
        <result column="subsidy_price" property="subsidyPrice" jdbcType="DECIMAL"/>
        <result column="subsidy_remark" property="subsidyRemark" jdbcType="VARCHAR"/>
        <result column="order_status" property="orderStatus"/>
        <result column="customer_id" property="customerId" jdbcType="BIGINT"/>
        <result column="pay_time" property="payTime" jdbcType="TIMESTAMP"/>
        <result column="send_express_time" property="sendExpressTime" jdbcType="TIMESTAMP"/>
        <result column="get_goods_time" property="getGoodsTime" jdbcType="TIMESTAMP"/>
        <result column="shopping_addr_id" property="shoppingAddrId" jdbcType="BIGINT"/>
        <result column="shipping_province" property="shippingProvince" jdbcType="VARCHAR"/>
        <result column="shipping_city" property="shippingCity" jdbcType="VARCHAR"/>
        <result column="shipping_county" property="shippingCounty" jdbcType="VARCHAR"/>
        <result column="shipping_address" property="shippingAddress" jdbcType="VARCHAR"/>
        <result column="shipping_person" property="shippingPerson" jdbcType="VARCHAR"/>
        <result column="shipping_phone" property="shippingPhone" jdbcType="VARCHAR"/>
        <result column="shipping_mobile" property="shippingMobile" jdbcType="VARCHAR"/>
        <result column="invoice_title" property="invoiceTitle" jdbcType="VARCHAR"/>
        <result column="invoice_content" property="invoiceContent" jdbcType="VARCHAR"/>
        <result column="del_flag" property="delFlag" jdbcType="CHAR"/>
        <result column="invoice_type" property="invoiceType" jdbcType="CHAR"/>
        <result column="customer_remark" property="customerRemark" jdbcType="VARCHAR"/>
        <result column="pay_id" property="payId" jdbcType="BIGINT"/>
        <result column="order_integral" property="orderIntegral" jdbcType="BIGINT"/>
        <result column="coupon_no" property="couponNo" jdbcType="VARCHAR"/>
        <result column="evaluate_flag" property="evaluateFlag" jdbcType="CHAR"/>
        <result column="express_price" property="expressPrice" jdbcType="DECIMAL"/>
        <result column="shipping_postcode" property="shippingPostcode" jdbcType="VARCHAR"/>
        <result column="order_cancel_time" property="orderCancelTime" jdbcType="TIMESTAMP"/>
        <result column="order_cancel_remark" property="orderCancelRemark" jdbcType="VARCHAR"/>
        <result column="back_price" property="backPrice" jdbcType="DECIMAL"/>
        <result column="business_id" property="businessId" jdbcType="BIGINT"/>
        <result column="dealer_type" property="dealerType" jdbcType="CHAR"/>
        <result column="create_time" property="createTime" jdbcType="TIMESTAMP"/>
        <result column="create_date" property="createDate" jdbcType="DATE"/>
        <result column="order_old_code" property="orderOldCode" jdbcType="BIGINT"/>
        <result column="order_new_status" property="orderNewStatus" jdbcType="CHAR"/>
        <result column="order_cargo_status" property="orderCargoStatus" jdbcType="CHAR"/>
        <result column="order_m_type" property="orderMType" jdbcType="CHAR"/>
        <result column="order_express_type" property="orderExpressType" jdbcType="CHAR"/>
        <result column="order_pre_price_order" property="orderPrePriceOrder" jdbcType="DECIMAL"/>
        <result column="order_line_pay" property="orderLinePay" jdbcType="CHAR"/>
        <result column="shipping_county_id" property="shippingCountyId" jdbcType="INTEGER"/>
        <result column="ware_id" property="wareId" jdbcType="BIGINT"/>
        <result column="ware_name" property="wareName" jdbcType="VARCHAR"/>
        <result column="send_person" property="sendPerson" jdbcType="VARCHAR"/>
        <result column="send_mobile" property="sendMobile" jdbcType="VARCHAR"/>
        <result column="direct_type" property="directType" jdbcType="CHAR"/>
        <result column="jf_price" property="jfPrice" jdbcType="DECIMAL"/>
        <result column="seller_remark" property="sellerRemark" jdbcType="VARCHAR"/>
        <result column="pay_name" property="payName" jdbcType="VARCHAR"/>
        <result column="ucoin_prise" property="ucoinPrise" jdbcType="DECIMAL"/>
        <result column="other_amount" property="otherAmount" jdbcType="DECIMAL"/>
        <result column="is_ucoin" property="isUcoin" jdbcType="CHAR"/>
        <result column="mall_id" property="mallId" jdbcType="INTEGER"/>
        <result column="ucoin_pay_time" property="ucoinPayTime" jdbcType="TIMESTAMP"/>
        <result column="enterprise_id" property="enterpriseId" jdbcType="BIGINT"/>
        <result column="self_pick" property="selfPick" jdbcType="TINYINT"/>
        <result column="delivery_code" property="deliveryCode" jdbcType="VARCHAR"/>
        <result column="is_valet" property="isValet" jdbcType="TINYINT"/>
        <result column="operator" property="operator" jdbcType="VARCHAR"/>
        <result column="customer_ucoin_json" property="customerUcoinJson" jdbcType="VARCHAR"/>
        <association property="customerInfo" resultMap="CustomerInfoResultMap"/>
        <association property="pickInfo" resultMap="OrderPickInfoResultMap"/>
        <association property="business" javaType="com.ylife.order.model.Order$Business"
                     resultMap="BaseBusinessResultMap"/>
        <collection property="orderGoodsList" column="order_id" javaType="ArrayList"
                    ofType="com.ylife.order.model.OrderGoods"
                    select="com.ylife.order.mapper.OrderGoodsMapper.selectOrderGoodsList"/>
        <!--根据订单ID查询该订单下面的出库物流信息-->
        <collection property="orderContainerRelations" column="order_id" javaType="ArrayList"
                    ofType="com.ylife.order.model.OrderContainerRelation"
                    select="com.ylife.order.mapper.OrderContainerRelationMapper.selectListByOrderIds"/>
    </resultMap>

    <resultMap id="BaseBusinessResultMap" type="com.ylife.order.model.Order$Business">
        <id column="business_id" property="businessId" jdbcType="BIGINT"/>
        <result column="store_name" property="businessName" jdbcType="VARCHAR"/>
    </resultMap>

    <resultMap id="CustomerInfoResultMap" type="com.ylife.order.model.Order$CustomerInfo">
        <id column="customer_id" property="customerId" jdbcType="BIGINT"/>
        <result column="customer_username" property="username" jdbcType="VARCHAR"/>
        <result column="contact_phone" property="contactPhone" jdbcType="VARCHAR"/>
        <result column="contact_addr" property="contactAddr" jdbcType="VARCHAR"/>
        <result column="fullname" property="fullName" jdbcType="VARCHAR"/>
    </resultMap>

    <resultMap id="BaseOrderRefundResultMap" type="com.ylife.order.model.OrderRefund">
        <id column="order_id" property="orderId" jdbcType="BIGINT"/>
        <result column="billing_type" property="billingType" jdbcType="VARCHAR"/>
        <result column="fullname" property="fullname" jdbcType="VARCHAR"/>
        <result column="idCard_no" property="idCardNo" jdbcType="VARCHAR"/>
        <result column="subsidy_price" property="subsidyPrice" jdbcType="DECIMAL"/>
        <result column="count" property="count" jdbcType="INTEGER"/>
        <result column="pay_time" property="payTime" jdbcType="TIMESTAMP"/>
        <result column="order_code" property="orderCode" jdbcType="VARCHAR"/>
    </resultMap>

    <resultMap id="OrderPickInfoResultMap" type="com.ylife.order.model.Order$OrderPickInfo">
        <id column="enterprise_id" property="enterpriseId" jdbcType="BIGINT"/>
        <result column="enterprise_name" property="enterpriseName" jdbcType="VARCHAR"/>
        <result column="pick_address" property="pickAddress" jdbcType="VARCHAR"/>
    </resultMap>

    <resultMap id="OpenBaseResultMap" type="com.ylife.order.model.Order">
        <id column="order_id" property="orderId" jdbcType="BIGINT"/>
        <result column="order_code" property="orderCode" jdbcType="BIGINT"/>
        <result column="order_status" property="orderStatus"/>
    </resultMap>

    <sql id="Base_Column_List">
        np_order.order_id,
        np_order.order_code,
        np_order.order_price,
        np_order.order_pre_price,
        np_order.order_old_price,
        np_order.subsidy_price,
        np_order.subsidy_remark,
        np_order.order_status,
        np_order.customer_id,
        np_order.pay_time,
        np_order.send_express_time,
        np_order.get_goods_time,
        np_order.shopping_addr_id,
        np_order.shipping_province,
        np_order.shipping_city,
        np_order.shipping_county,
        np_order.shipping_address,
        np_order.shipping_person,
        np_order.shipping_phone,
        np_order.shipping_mobile,
        np_order.invoice_title,
        np_order.invoice_content,
        np_order.del_flag,
        np_order.invoice_type,
        np_order.customer_remark,
        np_order.pay_id,
        np_order.order_integral,
        np_order.coupon_no,
        np_order.evaluate_flag,
        np_order.express_price,
        np_order.shipping_postcode,
        np_order.order_cancel_time,
        np_order.order_cancel_remark,
        np_order.back_price,
        np_order.business_id,
        np_order.dealer_type,
        np_order.create_time,
        np_order.create_date,
        np_order.order_old_code,
        np_order.order_new_status,
        np_order.order_cargo_status,
        np_order.order_m_type,
        np_order.order_express_type,
        np_order.order_pre_price_order,
        np_order.order_line_pay,
        np_order.shipping_county_id,
        np_order.ware_id,
        np_order.ware_name,
        np_order.send_person,
        np_order.send_mobile,
        np_order.direct_type,
        np_order.jf_price,
        np_order.seller_remark,
        np_order.pay_name,
        np_order.ucoin_prise,
        np_order.other_amount,
        np_order.is_ucoin,
        np_order.mall_id,
        np_order.ucoin_pay_time,
        np_order.enterprise_id,
        np_order.self_pick,
        np_order.delivery_code,
        np_order.is_valet,
        np_order.operator,
        np_order.customer_ucoin_json
    </sql>

    <sql id="Base_CustomerInfo_List">
        chinapost_customer.idCard_no as customer_username,
        chinapost_customer.contact_phone as contact_phone,
        chinapost_customer.contact_addr as contact_addr,
        chinapost_customer.fullname as fullname
    </sql>

    <sql id="Base_PickInfo_List">
        ysh_enterprise_info.enterprise_name as enterprise_name,
        ysh_enterprise_info.address as pick_address
    </sql>

    <sql id="Base_Business_Column_List">
        np_third_store_info.store_name
    </sql>

    <!-- 查询订单列表 -->
    <select id="selectByModelSelective" resultMap="BaseResultMap">
        select
        <include refid="Base_Column_List"/>,
        <include refid="Base_CustomerInfo_List"/>,
        <include refid="Base_PickInfo_List"/>,
        <include refid="Base_Business_Column_List"/>
        from np_order
        left join chinapost_customer on
        np_order.customer_id = chinapost_customer.id
        left join ysh_enterprise_info on
        np_order.enterprise_id = ysh_enterprise_info.enterprise_id
        left join np_third_store_info on
        np_order.business_id = np_third_store_info.store_id
        left join ysh_enterprise_func ON
        np_order.enterprise_id=ysh_enterprise_func.id
        <where>
            <if test="model.orderCode != null and model.orderCode != ''">
                and
                np_order.order_code = #{model.orderCode,jdbcType=BIGINT}
            </if>
            <if test="model.businessId != null">
                and
                np_order.business_id = #{model.businessId,jdbcType=BIGINT}
            </if>
            <if test="model.goodsInfoType != null">
                and
                np_order.goods_info_type = #{model.goodsInfoType}
            </if>
            <if test="model.selfPick != null">
                and
                np_order.self_pick = #{model.selfPick,jdbcType=TINYINT}
            </if>
            <if test="model.isValet != null">
                and
                np_order.is_valet = #{model.isValet,jdbcType=TINYINT}
            </if>
            <if test="model.orderStatus != null">
                and
                np_order.order_status = #{model.orderStatus,jdbcType=VARCHAR}
            </if>
            <if test="model.orderCargoStatus != null">
                and
                np_order.order_cargo_status = #{model.orderCargoStatus,jdbcType=VARCHAR}
            </if>
            <if test="model.shippingPerson != null and model.shippingPerson != ''">
                and
                np_order.shipping_person = #{model.shippingPerson,jdbcType=VARCHAR}
            </if>
            <if test="model.shippingMobile != null and model.shippingMobile != ''">
                and
                np_order.shipping_mobile = #{model.shippingMobile,jdbcType=VARCHAR}
            </if>
            <if test="model.shippingPhone != null">
                and
                np_order.shipping_phone = #{model.shippingPhone,jdbcType=VARCHAR}
            </if>
            <if test="model.enterpriseId != null">
                and
                np_order.enterprise_id = #{model.enterpriseId,jdbcType=BIGINT}
            </if>
            <if test="idCard != null">
                and
                chinapost_customer.idCard_no = #{idCard,jdbcType=VARCHAR}
            </if>
            <if test="createStart != null">
                and
                <![CDATA[np_order.create_time > #{createStart,jdbcType=TIMESTAMP}]]>
            </if>
            <if test="createEnd != null">
                and
                <![CDATA[np_order.create_time < #{createEnd,jdbcType=TIMESTAMP}]]>
            </if>
            <if test="payStart != null">
                and
                <![CDATA[np_order.pay_time > #{payStart,jdbcType=TIMESTAMP}]]>
            </if>
            <if test="payEnd != null">
                and
                <![CDATA[np_order.pay_time < #{payEnd,jdbcType=TIMESTAMP}]]>
            </if>
            <if test="maxCatalog!=null">
                <![CDATA[
                 and
                    ysh_enterprise_func.catalog<=#{maxCatalog,jdbcType=BIGINT}
                 ]]>
            </if>

            <if test="minCatalog!=null">
                <![CDATA[
                 and
                 ysh_enterprise_func.catalog>=#{minCatalog,jdbcType=BIGINT}
            ]]>
            </if>
        </where>
        order by np_order.create_time desc
        <if test="pageable != null">
            limit #{pageable.index,jdbcType=INTEGER},#{pageable.length,jdbcType=INTEGER}
        </if>
    </select>

    <select id="selectOrderPrimaryKey" resultMap="BaseOrderRefundResultMap"  parameterType="java.lang.Long">
        SELECT
        np_order.order_id,
        chinapost_customer.fullname,
        chinapost_customer.idCard_no,
        1 AS count,
        "网点订单补贴" AS billing_type,
        np_order.subsidy_price,
        np_order.order_code,
        np_order.pay_time
        FROM
        np_order
        LEFT JOIN chinapost_customer ON chinapost_customer.id = np_order.customer_id
        WHERE
        order_id = #{orderId,jdbcType=BIGINT};
    </select>

    <select id="countByModelSelective" resultType="java.lang.Integer">
        select
        count(*)
        from np_order left join chinapost_customer on
        np_order.customer_id = chinapost_customer.id
        left join ysh_enterprise_func ON
        np_order.enterprise_id=ysh_enterprise_func.id
        <where>
            <if test="model.orderCode != null and model.orderCode != ''">
                and
                np_order.order_code = #{model.orderCode,jdbcType=BIGINT}
            </if>
            <if test="model.businessId != null">
                and
                np_order.business_id = #{model.businessId,jdbcType=BIGINT}
            </if>
            <if test="model.goodsInfoType != null">
                and
                np_order.goods_info_type = #{model.goodsInfoType}
            </if>
            <if test="model.selfPick != null">
                and
                np_order.self_pick = #{model.selfPick,jdbcType=TINYINT}
            </if>
            <if test="model.isValet != null">
                and
                np_order.is_valet = #{model.isValet,jdbcType=TINYINT}
            </if>
            <if test="model.orderStatus != null">
                and
                np_order.order_status = #{model.orderStatus,jdbcType=VARCHAR}
            </if>
            <if test="model.orderCargoStatus != null">
                and
                np_order.order_cargo_status = #{model.orderCargoStatus,jdbcType=VARCHAR}
            </if>
            <if test="model.shippingPerson != null and model.shippingPerson != ''">
                and
                np_order.shipping_person = #{model.shippingPerson,jdbcType=VARCHAR}
            </if>
            <if test="model.shippingMobile != null and model.shippingMobile != ''">
                and
                np_order.shipping_mobile = #{model.shippingMobile,jdbcType=VARCHAR}
            </if>
            <if test="model.shippingPhone != null">
                and
                np_order.shipping_phone = #{model.shippingPhone,jdbcType=VARCHAR}
            </if>
            <if test="model.enterpriseId != null">
                and
                np_order.enterprise_id = #{model.enterpriseId,jdbcType=BIGINT}
            </if>
            <if test="idCard != null">
                and
                chinapost_customer.idCard_no = #{idCard,jdbcType=VARCHAR}
            </if>
            <if test="createStart != null">
                and
                <![CDATA[np_order.create_time > #{createStart,jdbcType=TIMESTAMP}]]>
            </if>
            <if test="createEnd != null">
                and
                <![CDATA[np_order.create_time < #{createEnd,jdbcType=TIMESTAMP}]]>
            </if>
            <if test="payStart != null">
                and
                <![CDATA[np_order.pay_time > #{payStart,jdbcType=TIMESTAMP}]]>
            </if>
            <if test="payEnd != null">
                and
                <![CDATA[np_order.pay_time < #{payEnd,jdbcType=TIMESTAMP}]]>
            </if>
            <if test="maxCatalog!=null">
                <![CDATA[
                 and
                    ysh_enterprise_func.catalog<=#{maxCatalog,jdbcType=BIGINT}
                 ]]>
            </if>

            <if test="minCatalog!=null">
                <![CDATA[
                 and
                 ysh_enterprise_func.catalog>=#{minCatalog,jdbcType=BIGINT}
            ]]>
            </if>
        </where>
    </select>

    <!-- 根据订单号查询订单详细 -->
    <select id="selectByOrderCode" resultMap="BaseResultMap" parameterType="java.lang.Long">
        select
        <include refid="Base_Column_List"/>,
        <include refid="Base_CustomerInfo_List"/>,
        <include refid="Base_PickInfo_List"/>,
        <include refid="Base_Business_Column_List"/>
        from np_order
        left join chinapost_customer on
        np_order.customer_id = chinapost_customer.id
        left join ysh_enterprise_info on
        np_order.enterprise_id = ysh_enterprise_info.enterprise_id
        left join np_third_store_info on
        np_order.business_id = np_third_store_info.store_id
        where order_code = #{orderCode,jdbcType=BIGINT}
    </select>


    <!-- 根据订单号查询订单详细 -->
    <select id="selectByDeliveryCode" resultMap="BaseResultMap" parameterType="java.lang.String">
        select
        <include refid="Base_Column_List"/>,
        <include refid="Base_CustomerInfo_List"/>,
        <include refid="Base_PickInfo_List"/>
        from np_order
        left join chinapost_customer on
        np_order.customer_id = chinapost_customer.id
        left join ysh_enterprise_info on
        np_order.enterprise_id = ysh_enterprise_info.enterprise_id
        where delivery_code = #{deliveryCode,jdbcType=VARCHAR}
    </select>


    <!-- 根据订单Id查询订单详细 -->
    <select id="selectByPrimaryKey" resultMap="BaseResultMap" parameterType="java.lang.Object">
        select
        <include refid="Base_Column_List"/>,
        <include refid="Base_CustomerInfo_List"/>,
        <include refid="Base_PickInfo_List"/>
        from np_order
        left join chinapost_customer on
        np_order.customer_id = chinapost_customer.id
        left join ysh_enterprise_info on
        np_order.enterprise_id = ysh_enterprise_info.enterprise_id
        where order_id = #{orderId,jdbcType=BIGINT}
    </select>

    <!-- 插入订单 -->
    <insert id="insertSelective" parameterType="com.ylife.order.model.Order" keyProperty="orderId"
            useGeneratedKeys="true">
        insert into np_order
        <trim prefix="(" suffix=")" suffixOverrides=",">
            <if test="orderId != null">
                order_id,
            </if>
            <if test="orderCode != null">
                order_code,
            </if>
            <if test="orderPrice != null">
                order_price,
            </if>
            <if test="orderPrePrice != null">
                order_pre_price,
            </if>
            <if test="orderOldPrice != null">
                order_old_price,
            </if>
            <if test="subsidyPrice != null">
                subsidy_price,
            </if>
            <if test="subsidyRemark != null">
                subsidy_remark,
            </if>
            <if test="orderStatus != null">
                order_status,
            </if>
            <if test="customerId != null">
                customer_id,
            </if>
            <if test="payTime != null">
                pay_time,
            </if>
            <if test="sendExpressTime != null">
                send_express_time,
            </if>
            <if test="getGoodsTime != null">
                get_goods_time,
            </if>
            <if test="shoppingAddrId != null">
                shopping_addr_id,
            </if>
            <if test="shippingProvince != null">
                shipping_province,
            </if>
            <if test="shippingCity != null">
                shipping_city,
            </if>
            <if test="shippingCounty != null">
                shipping_county,
            </if>
            <if test="shippingAddress != null">
                shipping_address,
            </if>
            <if test="shippingPerson != null">
                shipping_person,
            </if>
            <if test="shippingPhone != null">
                shipping_phone,
            </if>
            <if test="shippingMobile != null">
                shipping_mobile,
            </if>
            <if test="invoiceTitle != null">
                invoice_title,
            </if>
            <if test="invoiceContent != null">
                invoice_content,
            </if>
            <if test="delFlag != null">
                del_flag,
            </if>
            <if test="invoiceType != null">
                invoice_type,
            </if>
            <if test="customerRemark != null">
                customer_remark,
            </if>
            <if test="payId != null">
                pay_id,
            </if>
            <if test="orderIntegral != null">
                order_integral,
            </if>
            <if test="couponNo != null">
                coupon_no,
            </if>
            <if test="evaluateFlag != null">
                evaluate_flag,
            </if>
            <if test="expressPrice != null">
                express_price,
            </if>
            <if test="shippingPostcode != null">
                shipping_postcode,
            </if>
            <if test="orderCancelTime != null">
                order_cancel_time,
            </if>
            <if test="orderCancelRemark != null">
                order_cancel_remark,
            </if>
            <if test="backPrice != null">
                back_price,
            </if>
            <if test="businessId != null">
                business_id,
            </if>
            <if test="dealerType != null">
                dealer_type,
            </if>
            <if test="createTime != null">
                create_time,
            </if>
            <if test="createDate != null">
                create_date,
            </if>
            <if test="orderOldCode != null">
                order_old_code,
            </if>
            <if test="orderNewStatus != null">
                order_new_status,
            </if>
            <if test="orderCargoStatus != null">
                order_cargo_status,
            </if>
            <if test="orderMType != null">
                order_m_type,
            </if>
            <if test="orderExpressType != null">
                order_express_type,
            </if>
            <if test="orderPrePriceOrder != null">
                order_pre_price_order,
            </if>
            <if test="orderLinePay != null">
                order_line_pay,
            </if>
            <if test="shippingCountyId != null">
                shipping_county_id,
            </if>
            <if test="wareId != null">
                ware_id,
            </if>
            <if test="wareName != null">
                ware_name,
            </if>
            <if test="sendPerson != null">
                send_person,
            </if>
            <if test="sendMobile != null">
                send_mobile,
            </if>
            <if test="directType != null">
                direct_type,
            </if>
            <if test="jfPrice != null">
                jf_price,
            </if>
            <if test="sellerRemark != null">
                seller_remark,
            </if>
            <if test="payName != null">
                pay_name,
            </if>
            <if test="ucoinPrise != null">
                ucoin_prise,
            </if>
            <if test="otherAmount != null">
                other_amount,
            </if>
            <if test="isUcoin != null">
                is_ucoin,
            </if>
            <if test="mallId != null">
                mall_id,
            </if>
            <if test="ucoinPayTime != null">
                ucoin_pay_time,
            </if>
            <if test="enterpriseId != null">
                enterprise_id,
            </if>
            <if test="selfPick != null">
                self_pick,
            </if>
            <if test="deliveryCode != null">
                delivery_code,
            </if>
            <if test="isValet != null">
                is_valet,
            </if>
            <if test="operator != null">
                operator,
            </if>
            <if test="customerUcoinJson!=null">
                customer_ucoin_json,
            </if>
            <if test="goodsInfoType!=null">
                goods_info_type,
            </if>
        </trim>
        <trim prefix="values (" suffix=")" suffixOverrides=",">
            <if test="orderId != null">
                #{orderId,jdbcType=BIGINT},
            </if>
            <if test="orderCode != null">
                #{orderCode,jdbcType=BIGINT},
            </if>
            <if test="orderPrice != null">
                #{orderPrice,jdbcType=DECIMAL},
            </if>
            <if test="orderPrePrice != null">
                #{orderPrePrice,jdbcType=DECIMAL},
            </if>
            <if test="orderOldPrice != null">
                #{orderOldPrice,jdbcType=DECIMAL},
            </if>
            <if test="subsidyPrice != null">
                #{subsidyPrice,jdbcType=DECIMAL},
            </if>
            <if test="subsidyRemark != null">
                #{subsidyRemark,jdbcType=VARCHAR},
            </if>
            <if test="orderStatus != null">
                #{orderStatus,jdbcType=CHAR},
            </if>
            <if test="customerId != null">
                #{customerId,jdbcType=BIGINT},
            </if>
            <if test="payTime != null">
                #{payTime,jdbcType=TIMESTAMP},
            </if>
            <if test="sendExpressTime != null">
                #{sendExpressTime,jdbcType=TIMESTAMP},
            </if>
            <if test="getGoodsTime != null">
                #{getGoodsTime,jdbcType=TIMESTAMP},
            </if>
            <if test="shoppingAddrId != null">
                #{shoppingAddrId,jdbcType=BIGINT},
            </if>
            <if test="shippingProvince != null">
                #{shippingProvince,jdbcType=VARCHAR},
            </if>
            <if test="shippingCity != null">
                #{shippingCity,jdbcType=VARCHAR},
            </if>
            <if test="shippingCounty != null">
                #{shippingCounty,jdbcType=VARCHAR},
            </if>
            <if test="shippingAddress != null">
                #{shippingAddress,jdbcType=VARCHAR},
            </if>
            <if test="shippingPerson != null">
                #{shippingPerson,jdbcType=VARCHAR},
            </if>
            <if test="shippingPhone != null">
                #{shippingPhone,jdbcType=VARCHAR},
            </if>
            <if test="shippingMobile != null">
                #{shippingMobile,jdbcType=VARCHAR},
            </if>
            <if test="invoiceTitle != null">
                #{invoiceTitle,jdbcType=VARCHAR},
            </if>
            <if test="invoiceContent != null">
                #{invoiceContent,jdbcType=VARCHAR},
            </if>
            <if test="delFlag != null">
                #{delFlag,jdbcType=CHAR},
            </if>
            <if test="invoiceType != null">
                #{invoiceType,jdbcType=CHAR},
            </if>
            <if test="customerRemark != null">
                #{customerRemark,jdbcType=VARCHAR},
            </if>
            <if test="payId != null">
                #{payId,jdbcType=BIGINT},
            </if>
            <if test="orderIntegral != null">
                #{orderIntegral,jdbcType=BIGINT},
            </if>
            <if test="couponNo != null">
                #{couponNo,jdbcType=VARCHAR},
            </if>
            <if test="evaluateFlag != null">
                #{evaluateFlag,jdbcType=CHAR},
            </if>
            <if test="expressPrice != null">
                #{expressPrice,jdbcType=DECIMAL},
            </if>
            <if test="shippingPostcode != null">
                #{shippingPostcode,jdbcType=VARCHAR},
            </if>
            <if test="orderCancelTime != null">
                #{orderCancelTime,jdbcType=TIMESTAMP},
            </if>
            <if test="orderCancelRemark != null">
                #{orderCancelRemark,jdbcType=VARCHAR},
            </if>
            <if test="backPrice != null">
                #{backPrice,jdbcType=DECIMAL},
            </if>
            <if test="businessId != null">
                #{businessId,jdbcType=BIGINT},
            </if>
            <if test="dealerType != null">
                #{dealerType,jdbcType=CHAR},
            </if>
            <if test="createTime != null">
                #{createTime,jdbcType=TIMESTAMP},
            </if>
            <if test="createDate != null">
                #{createDate,jdbcType=DATE},
            </if>
            <if test="orderOldCode != null">
                #{orderOldCode,jdbcType=BIGINT},
            </if>
            <if test="orderNewStatus != null">
                #{orderNewStatus,jdbcType=CHAR},
            </if>
            <if test="orderCargoStatus != null">
                #{orderCargoStatus,jdbcType=CHAR},
            </if>
            <if test="orderMType != null">
                #{orderMType,jdbcType=CHAR},
            </if>
            <if test="orderExpressType != null">
                #{orderExpressType,jdbcType=CHAR},
            </if>
            <if test="orderPrePriceOrder != null">
                #{orderPrePriceOrder,jdbcType=DECIMAL},
            </if>
            <if test="orderLinePay != null">
                #{orderLinePay,jdbcType=CHAR},
            </if>
            <if test="shippingCountyId != null">
                #{shippingCountyId,jdbcType=INTEGER},
            </if>
            <if test="wareId != null">
                #{wareId,jdbcType=BIGINT},
            </if>
            <if test="wareName != null">
                #{wareName,jdbcType=VARCHAR},
            </if>
            <if test="sendPerson != null">
                #{sendPerson,jdbcType=VARCHAR},
            </if>
            <if test="sendMobile != null">
                #{sendMobile,jdbcType=VARCHAR},
            </if>
            <if test="directType != null">
                #{directType,jdbcType=CHAR},
            </if>
            <if test="jfPrice != null">
                #{jfPrice,jdbcType=DECIMAL},
            </if>
            <if test="sellerRemark != null">
                #{sellerRemark,jdbcType=VARCHAR},
            </if>
            <if test="payName != null">
                #{payName,jdbcType=VARCHAR},
            </if>
            <if test="ucoinPrise != null">
                #{ucoinPrise,jdbcType=DECIMAL},
            </if>
            <if test="otherAmount != null">
                #{otherAmount,jdbcType=DECIMAL},
            </if>
            <if test="isUcoin != null">
                #{isUcoin,jdbcType=CHAR},
            </if>
            <if test="mallId != null">
                #{mallId,jdbcType=INTEGER},
            </if>
            <if test="ucoinPayTime != null">
                #{ucoinPayTime,jdbcType=TIMESTAMP},
            </if>
            <if test="enterpriseId != null">
                #{enterpriseId,jdbcType=BIGINT},
            </if>
            <if test="selfPick != null">
                #{selfPick,jdbcType=TINYINT},
            </if>
            <if test="deliveryCode != null">
                #{deliveryCode,jdbcType=VARCHAR},
            </if>
            <if test="isValet != null">
                #{isValet,jdbcType=TINYINT},
            </if>
            <if test="operator != null">
                #{operator,jdbcType=VARCHAR},
            </if>
            <if test="customerUcoinJson!=null">
                #{customerUcoinJson,jdbcType=VARCHAR},
            </if>
            <if test="goodsInfoType!=null">
                #{goodsInfoType,jdbcType=VARCHAR},
            </if>
        </trim>
    </insert>

    <update id="updateByPrimaryKeySelective" parameterType="com.ylife.order.model.Order">
        update np_order
        <set>
            <if test="orderCode != null">
                order_code = #{orderCode,jdbcType=BIGINT},
            </if>
            <if test="orderPrice != null">
                order_price = #{orderPrice,jdbcType=DECIMAL},
            </if>
            <if test="orderPrePrice != null">
                order_pre_price = #{orderPrePrice,jdbcType=DECIMAL},
            </if>
            <if test="orderOldPrice != null">
                order_old_price = #{orderOldPrice,jdbcType=DECIMAL},
            </if>
            <if test="subsidyPrice !=null">
                subsidy_price = #{subsidyPrice,jdbcType=DECIMAL},
            </if>
            <if test="subsidyRemark !=null">
                subsidy_remark = #{subsidyRemark,jdbcType=VARCHAR},
            </if>
            <if test="orderStatus != null">
                order_status = #{orderStatus,jdbcType=VARCHAR},
            </if>
            <if test="customerId != null">
                customer_id = #{customerId,jdbcType=BIGINT},
            </if>
            <if test="payTime != null">
                pay_time = #{payTime,jdbcType=TIMESTAMP},
            </if>
            <if test="sendExpressTime != null">
                send_express_time = #{sendExpressTime,jdbcType=TIMESTAMP},
            </if>
            <if test="getGoodsTime != null">
                get_goods_time = #{getGoodsTime,jdbcType=TIMESTAMP},
            </if>
            <if test="shoppingAddrId != null">
                shopping_addr_id = #{shoppingAddrId,jdbcType=BIGINT},
            </if>
            <if test="shippingProvince != null">
                shipping_province = #{shippingProvince,jdbcType=VARCHAR},
            </if>
            <if test="shippingCity != null">
                shipping_city = #{shippingCity,jdbcType=VARCHAR},
            </if>
            <if test="shippingCounty != null">
                shipping_county = #{shippingCounty,jdbcType=VARCHAR},
            </if>
            <if test="shippingAddress != null">
                shipping_address = #{shippingAddress,jdbcType=VARCHAR},
            </if>
            <if test="shippingPerson != null">
                shipping_person = #{shippingPerson,jdbcType=VARCHAR},
            </if>
            <if test="shippingPhone != null">
                shipping_phone = #{shippingPhone,jdbcType=VARCHAR},
            </if>
            <if test="shippingMobile != null">
                shipping_mobile = #{shippingMobile,jdbcType=VARCHAR},
            </if>
            <if test="invoiceTitle != null">
                invoice_title = #{invoiceTitle,jdbcType=VARCHAR},
            </if>
            <if test="invoiceContent != null">
                invoice_content = #{invoiceContent,jdbcType=VARCHAR},
            </if>
            <if test="delFlag != null">
                del_flag = #{delFlag,jdbcType=CHAR},
            </if>
            <if test="invoiceType != null">
                invoice_type = #{invoiceType,jdbcType=CHAR},
            </if>
            <if test="customerRemark != null">
                customer_remark = #{customerRemark,jdbcType=VARCHAR},
            </if>
            <if test="payId != null">
                pay_id = #{payId,jdbcType=BIGINT},
            </if>
            <if test="orderIntegral != null">
                order_integral = #{orderIntegral,jdbcType=BIGINT},
            </if>
            <if test="couponNo != null">
                coupon_no = #{couponNo,jdbcType=VARCHAR},
            </if>
            <if test="evaluateFlag != null">
                evaluate_flag = #{evaluateFlag,jdbcType=CHAR},
            </if>
            <if test="expressPrice != null">
                express_price = #{expressPrice,jdbcType=DECIMAL},
            </if>
            <if test="shippingPostcode != null">
                shipping_postcode = #{shippingPostcode,jdbcType=VARCHAR},
            </if>
            <if test="orderCancelTime != null">
                order_cancel_time = #{orderCancelTime,jdbcType=TIMESTAMP},
            </if>
            <if test="orderCancelRemark != null">
                order_cancel_remark = #{orderCancelRemark,jdbcType=VARCHAR},
            </if>
            <if test="backPrice != null">
                back_price = #{backPrice,jdbcType=DECIMAL},
            </if>
            <if test="businessId != null">
                business_id = #{businessId,jdbcType=BIGINT},
            </if>
            <if test="dealerType != null">
                dealer_type = #{dealerType,jdbcType=CHAR},
            </if>
            <if test="createTime != null">
                create_time = #{createTime,jdbcType=TIMESTAMP},
            </if>
            <if test="createDate != null">
                create_date = #{createDate,jdbcType=DATE},
            </if>
            <if test="orderOldCode != null">
                order_old_code = #{orderOldCode,jdbcType=BIGINT},
            </if>
            <if test="orderNewStatus != null">
                order_new_status = #{orderNewStatus,jdbcType=CHAR},
            </if>
            <if test="orderCargoStatus != null">
                order_cargo_status = #{orderCargoStatus,jdbcType=CHAR},
            </if>
            <if test="orderMType != null">
                order_m_type = #{orderMType,jdbcType=CHAR},
            </if>
            <if test="orderExpressType != null">
                order_express_type = #{orderExpressType,jdbcType=CHAR},
            </if>
            <if test="orderPrePriceOrder != null">
                order_pre_price_order = #{orderPrePriceOrder,jdbcType=DECIMAL},
            </if>
            <if test="orderLinePay != null">
                order_line_pay = #{orderLinePay,jdbcType=CHAR},
            </if>
            <if test="shippingCountyId != null">
                shipping_county_id = #{shippingCountyId,jdbcType=INTEGER},
            </if>
            <if test="wareId != null">
                ware_id = #{wareId,jdbcType=BIGINT},
            </if>
            <if test="wareName != null">
                ware_name = #{wareName,jdbcType=VARCHAR},
            </if>
            <if test="sendPerson != null">
                send_person = #{sendPerson,jdbcType=VARCHAR},
            </if>
            <if test="sendMobile != null">
                send_mobile = #{sendMobile,jdbcType=VARCHAR},
            </if>
            <if test="directType != null">
                direct_type = #{directType,jdbcType=CHAR},
            </if>
            <if test="jfPrice != null">
                jf_price = #{jfPrice,jdbcType=DECIMAL},
            </if>
            <if test="sellerRemark != null">
                seller_remark = #{sellerRemark,jdbcType=VARCHAR},
            </if>
            <if test="payName != null">
                pay_name = #{payName,jdbcType=VARCHAR},
            </if>
            <if test="ucoinPrise != null">
                ucoin_prise = #{ucoinPrise,jdbcType=DECIMAL},
            </if>
            <if test="otherAmount != null">
                other_amount = #{otherAmount,jdbcType=DECIMAL},
            </if>
            <if test="isUcoin != null">
                is_ucoin = #{isUcoin,jdbcType=CHAR},
            </if>
            <if test="mallId != null">
                mall_id = #{mallId,jdbcType=INTEGER},
            </if>
            <if test="ucoinPayTime != null">
                ucoin_pay_time = #{ucoinPayTime,jdbcType=TIMESTAMP},
            </if>
            <if test="enterpriseId != null">
                enterprise_id = #{enterpriseId,jdbcType=BIGINT},
            </if>
            <if test="selfPick != null">
                self_pick = #{selfPick,jdbcType=TINYINT},
            </if>
            <if test="deliveryCode != null">
                delivery_code = #{deliveryCode,jdbcType=VARCHAR},
            </if>
            <if test="isValet != null">
                is_valet = #{isValet,jdbcType=TINYINT},
            </if>
            <if test="operator != null">
                operator = #{operator,jdbcType=VARCHAR},
            </if>
            <if test="customerUcoinJson!=null">
                customer_ucoin_json=#{customerUcoinJson,jdbcType=VARCHAR},
            </if>
        </set>
        where order_id = #{orderId,jdbcType=BIGINT}
    </update>

    <update id="updateByOrderCodeSelective" parameterType="com.ylife.order.model.Order">
        update np_order
        <set>
            <if test="orderPrice != null">
                order_price = #{orderPrice,jdbcType=DECIMAL},
            </if>
            <if test="orderPrePrice != null">
                order_pre_price = #{orderPrePrice,jdbcType=DECIMAL},
            </if>
            <if test="orderOldPrice != null">
                order_old_price = #{orderOldPrice,jdbcType=DECIMAL},
            </if>
            <if test="subsidyPrice !=null">
                subsidy_price = #{subsidyPrice,jdbcType=DECIMAL},
            </if>
            <if test="subsidyRemark !=null">
                subsidy_remark = #{subsidyRemark,jdbcType=VARCHAR},
            </if>
            <if test="orderStatus != null">
                order_status = #{orderStatus,jdbcType=VARCHAR},
            </if>
            <if test="customerId != null">
                customer_id = #{customerId,jdbcType=BIGINT},
            </if>
            <if test="payTime != null">
                pay_time = #{payTime,jdbcType=TIMESTAMP},
            </if>
            <if test="sendExpressTime != null">
                send_express_time = #{sendExpressTime,jdbcType=TIMESTAMP},
            </if>
            <if test="getGoodsTime != null">
                get_goods_time = #{getGoodsTime,jdbcType=TIMESTAMP},
            </if>
            <if test="shoppingAddrId != null">
                shopping_addr_id = #{shoppingAddrId,jdbcType=BIGINT},
            </if>
            <if test="shippingProvince != null">
                shipping_province = #{shippingProvince,jdbcType=VARCHAR},
            </if>
            <if test="shippingCity != null">
                shipping_city = #{shippingCity,jdbcType=VARCHAR},
            </if>
            <if test="shippingCounty != null">
                shipping_county = #{shippingCounty,jdbcType=VARCHAR},
            </if>
            <if test="shippingAddress != null">
                shipping_address = #{shippingAddress,jdbcType=VARCHAR},
            </if>
            <if test="shippingPerson != null">
                shipping_person = #{shippingPerson,jdbcType=VARCHAR},
            </if>
            <if test="shippingPhone != null">
                shipping_phone = #{shippingPhone,jdbcType=VARCHAR},
            </if>
            <if test="shippingMobile != null">
                shipping_mobile = #{shippingMobile,jdbcType=VARCHAR},
            </if>
            <if test="invoiceTitle != null">
                invoice_title = #{invoiceTitle,jdbcType=VARCHAR},
            </if>
            <if test="invoiceContent != null">
                invoice_content = #{invoiceContent,jdbcType=VARCHAR},
            </if>
            <if test="delFlag != null">
                del_flag = #{delFlag,jdbcType=CHAR},
            </if>
            <if test="invoiceType != null">
                invoice_type = #{invoiceType,jdbcType=CHAR},
            </if>
            <if test="customerRemark != null">
                customer_remark = #{customerRemark,jdbcType=VARCHAR},
            </if>
            <if test="payId != null">
                pay_id = #{payId,jdbcType=BIGINT},
            </if>
            <if test="orderIntegral != null">
                order_integral = #{orderIntegral,jdbcType=BIGINT},
            </if>
            <if test="couponNo != null">
                coupon_no = #{couponNo,jdbcType=VARCHAR},
            </if>
            <if test="evaluateFlag != null">
                evaluate_flag = #{evaluateFlag,jdbcType=CHAR},
            </if>
            <if test="expressPrice != null">
                express_price = #{expressPrice,jdbcType=DECIMAL},
            </if>
            <if test="shippingPostcode != null">
                shipping_postcode = #{shippingPostcode,jdbcType=VARCHAR},
            </if>
            <if test="orderCancelTime != null">
                order_cancel_time = #{orderCancelTime,jdbcType=TIMESTAMP},
            </if>
            <if test="orderCancelRemark != null">
                order_cancel_remark = #{orderCancelRemark,jdbcType=VARCHAR},
            </if>
            <if test="backPrice != null">
                back_price = #{backPrice,jdbcType=DECIMAL},
            </if>
            <if test="businessId != null">
                business_id = #{businessId,jdbcType=BIGINT},
            </if>
            <if test="dealerType != null">
                dealer_type = #{dealerType,jdbcType=CHAR},
            </if>
            <if test="createTime != null">
                create_time = #{createTime,jdbcType=TIMESTAMP},
            </if>
            <if test="createDate != null">
                create_date = #{createDate,jdbcType=DATE},
            </if>
            <if test="orderOldCode != null">
                order_old_code = #{orderOldCode,jdbcType=BIGINT},
            </if>
            <if test="orderNewStatus != null">
                order_new_status = #{orderNewStatus,jdbcType=CHAR},
            </if>
            <if test="orderCargoStatus != null">
                order_cargo_status = #{orderCargoStatus,jdbcType=CHAR},
            </if>
            <if test="orderMType != null">
                order_m_type = #{orderMType,jdbcType=CHAR},
            </if>
            <if test="orderExpressType != null">
                order_express_type = #{orderExpressType,jdbcType=CHAR},
            </if>
            <if test="orderPrePriceOrder != null">
                order_pre_price_order = #{orderPrePriceOrder,jdbcType=DECIMAL},
            </if>
            <if test="orderLinePay != null">
                order_line_pay = #{orderLinePay,jdbcType=CHAR},
            </if>
            <if test="shippingCountyId != null">
                shipping_county_id = #{shippingCountyId,jdbcType=INTEGER},
            </if>
            <if test="wareId != null">
                ware_id = #{wareId,jdbcType=BIGINT},
            </if>
            <if test="wareName != null">
                ware_name = #{wareName,jdbcType=VARCHAR},
            </if>
            <if test="sendPerson != null">
                send_person = #{sendPerson,jdbcType=VARCHAR},
            </if>
            <if test="sendMobile != null">
                send_mobile = #{sendMobile,jdbcType=VARCHAR},
            </if>
            <if test="directType != null">
                direct_type = #{directType,jdbcType=CHAR},
            </if>
            <if test="jfPrice != null">
                jf_price = #{jfPrice,jdbcType=DECIMAL},
            </if>
            <if test="sellerRemark != null">
                seller_remark = #{sellerRemark,jdbcType=VARCHAR},
            </if>
            <if test="payName != null">
                pay_name = #{payName,jdbcType=VARCHAR},
            </if>
            <if test="ucoinPrise != null">
                ucoin_prise = #{ucoinPrise,jdbcType=DECIMAL},
            </if>
            <if test="otherAmount != null">
                other_amount = #{otherAmount,jdbcType=DECIMAL},
            </if>
            <if test="isUcoin != null">
                is_ucoin = #{isUcoin,jdbcType=CHAR},
            </if>
            <if test="mallId != null">
                mall_id = #{mallId,jdbcType=INTEGER},
            </if>
            <if test="ucoinPayTime != null">
                ucoin_pay_time = #{ucoinPayTime,jdbcType=TIMESTAMP},
            </if>
            <if test="enterpriseId != null">
                enterprise_id = #{enterpriseId,jdbcType=BIGINT},
            </if>
            <if test="selfPick != null">
                self_pick = #{selfPick,jdbcType=TINYINT},
            </if>
            <if test="deliveryCode != null">
                delivery_code = #{deliveryCode,jdbcType=VARCHAR},
            </if>
            <if test="isValet != null">
                is_valet = #{isValet,jdbcType=TINYINT},
            </if>
            <if test="operator != null">
                operator = #{operator,jdbcType=VARCHAR},
            </if>
            <if test="customerUcoinJson!=null">
                customer_ucoin_json=#{customerUcoinJson,jdbcType=VARCHAR},
            </if>
        </set>
        where order_code = #{orderCode,jdbcType=BIGINT}
    </update>

    <update id="updateStatusToCancelByTime" parameterType="java.util.Map">
        update np_order
        set
        order_status = 'CANCELED',
        order_cancel_remark = #{remark,jdbcType=VARCHAR},
        order_cancel_time =NOW()
        where
        order_status = 'SUBMITED'
        and (UNIX_TIMESTAMP(NOW()) - UNIX_TIMESTAMP(create_time)) > #{second,jdbcType=INTEGER}
        and create_time is not null
        and del_flag = '0'
    </update>

    <update id="updateDeliveryCodeToNullByOrderCode" parameterType="java.lang.Long">
        update np_order
        set
        delivery_code = null
        where
        order_code = #{orderCode,jdbcType=BIGINT}
    </update>

    <update id="updateOrderStatusByOrderCode">
        update np_order
        set
        order_status = #{status,jdbcType=VARCHAR}
        where
        order_code = #{orderCode,jdbcType=BIGINT}
    </update>


    <select id="selectByOrderOldCode" parameterType="java.lang.Long" resultMap="BaseResultMap">
        select
        <include refid="Base_Column_List"/>
        from np_order
        where order_old_code = #{orderOldCode,jdbcType=BIGINT} and del_flag = '0'
    </select>

    <!-- 查询需要同步的物流单订单（订单状态为已付款未发货、申请退货、申请退款、退款待客户收货、退款拒绝、退货拒绝） -->
    <select id="selectByCondition" parameterType="com.ylife.order.model.Order" resultMap="OpenBaseResultMap">
        select
        order_code,
        order_status,
        order_id
        from np_order
        where del_flag = '0'
        and order_status in
        ('PAYED','RETURN_APPLIED','REFUND_APPLIED','RETURN_WAIT_RECEIVE','RETURN_DENIED','REFUND_DENIED')
        and self_pick='0'
    </select>

    <!-- （同步下来需要修改的订单）修改订单状态 -->
    <update id="updateStatusByOrderCode" parameterType="com.ylife.client.bean.OOrderAllInfo">
        update np_order
        <set>
            <if test="orderStatus !=null">
                order_status=#{orderStatus,jdbcType=VARCHAR},
            </if>
            <if test="orderCargoStatus">
                order_cargo_status=#{orderCargoStatus,jdbcType=VARCHAR},
            </if>
            <if test="sendExpressTime != null">
                send_express_time = #{sendExpressTime,jdbcType=TIMESTAMP},
            </if>
        </set>
        where order_code = #{orderCode,jdbcType=BIGINT}
    </update>


    <!-- 定时取消订单（代客下单未支付） -->
    <select id="selectByValetSubmit" resultMap="OpenBaseResultMap">
        select
        order_code
        from np_order
        where del_flag = '0'
        and order_status in ('SUBMITED')
        and is_valet = 1
        and
        (UNIX_TIMESTAMP(NOW()) - UNIX_TIMESTAMP(create_time)) > 10*60
    </select>

    <!-- 查询订单详细 -->
    <select id="getOrderByCodes" resultMap="BaseResultMap" parameterType="java.util.List" >
        select
        <include refid="Base_Column_List" />
        from np_order
        where order_code in
        (
        <foreach collection="list" separator="," item="orderCode" >
            #{orderCode}
        </foreach>
        )
    </select>
</mapper>